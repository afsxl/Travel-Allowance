{% extends 'home.html' %}
{% load static %}
{% block title%}AddLinks{%endblock%}
{% block content %}
<link rel="stylesheet" href="{% static 'css/pdfGenerate.css' %}" />
<section class="report-container" id="pdfToPrint">
	<label class="report-container-heading">STATE INSTITUTE OF TEACHERS TRAINING AND RESEARCH KALAMASSERY</label>
	<div class="report-container-col-1">
		<label>Course Title:</label>
		<label>Course Code:</label>
	</div>
	<div class="report-container-col-2">
		<span>
			<label>Head Quarters:</label>
		</span>
		<span>
			<label>Name In Capital Letters:</label>
			<label>Designation:</label>
			<label>Address:</label>
		</span>
		<span>
			<label>Basic Pay:</label>
			<label>A/C No & IFSC Code:</label>
			<label>Bank/Branch:</label>
		</span>
		<span>
			<label>Allowance:</label>
		</span>
	</div>
	<div class="report-container-col-3">
		<span>
			<label>Departure</label>
			<label>Arrival</label>
		</span>
		<span></span>
	</div>
	<div class="report-container-col-4">
		<span>
			<div>
				<label>Station</label>
				<label>Date</label>
				<label>Time</label>
			</div>
			<div>
				<label>Station</label>
				<label>Date</label>
				<label>Time</label>
			</div>
		</span>
		<span>
			<p>Distance <br />(KM)</p>
			<p>Distance <br />(KM)</p>
			<p>
				Mode of<br />
				Journey <br />Rail/Road
			</p>
			<p>Fare (Rs)</p>
			<p>
				Incidential<br />
				Expense<br />(Rs)
			</p>
			<p>
				DA for<br />
				halt (Rs)
			</p>
			<p>
				Total<br />
				Amount <br />(Rs)
			</p>
			<p>
				Purpose of<br />
				Journey
			</p>
			<p>Remarks</p>
		</span>
	</div>
	<div class="report-container-col-5">
		<div>
			<span>
				<div>
					<label></label>
					<label></label>
					<label></label>
				</div>
				<div>
					<label></label>
					<label></label>
					<label></label>
				</div>
			</span>
			<span>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
				<p></p>
			</span>
		</div>

	</div>
</section>

{% comment %} <button id="downloadPdfBtn">Download PDF</button> {% endcomment %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
	document
		.getElementById("downloadPdfBtn")
		.addEventListener("click", function () {
			const { jsPDF } = window.jspdf;
			const pdf = new jsPDF("l", "mm", "a4"); // Landscape A4
			const element = document.getElementById("pdfToPrint");

			html2canvas(element, { scale: 2 }).then((canvas) => {
				const imgData = canvas.toDataURL("image/png");

				// A4 Page Dimensions (landscape)
				const pageWidth = 297; // A4 width in mm (landscape)
				const pageHeight = 210; // A4 height in mm (landscape)

				// Image Dimensions
				const imgWidth = pageWidth - 20; // Scale width to fit A4 width
				const imgHeight = (canvas.height * imgWidth) / canvas.width; // Maintain aspect ratio

				// Calculate center position
				const x = (pageWidth - imgWidth) / 2; // Center horizontally
				const y = (pageHeight - imgHeight) / 4; // Center vertically

				// Add image to PDF at calculated position
				pdf.addImage(imgData, "PNG", x, y, imgWidth, imgHeight);
				pdf.save("download.pdf");
			});
		});
</script>

{% endblock %}